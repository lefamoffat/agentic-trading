[pytest]
python_files = test_*.py
python_classes = Test*
python_functions = test_*

testpaths = 
    src/*/tests
    src/brokers/*/tests
    apps/*/tests
    integration_tests

# Test markers following the established pattern
markers =
    unit: Pure logic tests, < 50ms
    component: Uses mocks, < 1s  
    integration: Real dependencies, skipped in CI

# Test collection and execution
collect_ignore = 
    setup.py
    conftest.py

# Async test support
asyncio_mode = auto

# Coverage reporting
addopts = 
    --strict-markers
    --disable-warnings
    --verbose
    --tb=short
    --cov=src
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-fail-under=30

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:aim.*

# Test environment variables can be set externally or in conftest.py
